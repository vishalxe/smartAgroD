<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRODUCTS</title>
    <!-- fontawesome cdn -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- bootstrap css -->
    <link rel = "stylesheet" href = "bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <!-- custom css -->
    <link rel = "stylesheet" href = "agriproduct.css">
    <style>
        .feat {
            flex-basis: calc(33.333% - 20px);
            max-width: calc(33.333% - 20px);
            margin-bottom: 20px;
            margin-right: 20px;
        }
        .product-image {
            height: 200px; /* Adjust the height as needed */
            object-fit: cover;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        /* Back Button */
        .back-btn {
            position: fixed;
            top: 100px;
            left: 20px;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            z-index: 999;
            box-shadow: var(--shadow);
        }

        .back-btn:hover {
            background: var(--secondary-color);
            transform: scale(1.1);
        }

        .back-btn i {
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <!-- navbar -->
    <nav class = "navbar navbar-expand-lg navbar-light bg-white py-4 fixed-top">
        <div class = "container">
            <a class = "navbar-brand d-flex justify-content-between align-items-center order-lg-0" href = "index.html">
                <img src = "images/logo.jpg" alt = "site icon">
                <span class = "text-uppercase fw-lighter ms-2">AGRO-SMART</span>
            </a>

            <div class="order-lg-2 nav-btns">
                <!-- Shopping Cart Button -->
                <a href="cart.html">
                    <button type="button" class="btn position-relative">
                        <i class="fa fa-shopping-cart"></i>
                      
                    </button>
                </a>
            
                <!-- Wishlist Button -->
                <button type="button" class="btn position-relative">
                    <i class="fa fa-heart"></i>
                </button>
            
                <!-- Search Button -->
                <button type="button" class="btn position-relative">
                    <i class="fa fa-search"></i>
                </button>
            </div>
            
            

            <button class = "navbar-toggler border-0" type = "button" data-bs-toggle = "collapse" data-bs-target = "#navMenu">
                <span class = "navbar-toggler-icon"></span>
            </button>

            <div class = "collapse navbar-collapse order-lg-1" id = "navMenu">
                <ul class = "navbar-nav mx-auto text-center">
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "#header">Home</a>
                    </li>
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "#collection">Products</a>
                    </li>
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "season.html">Season Chart</a>
                    </li>
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "#blogs">Articles</a>
                    </li>
                    <li class = "nav-item px-2 py-2">
                        <a class = "nav-link text-uppercase text-dark" href = "#about">About Us</a>
                    </li>
                    <li class = "nav-item px-2 py-2 border-0">
                        <a class = "nav-link text-uppercase text-dark" href = "#popular">Popular</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- end of navbar -->

    <!-- Back Button -->
    <button class="back-btn" onclick="goBack()" title="Go Back">
        <i class="ri-arrow-left-line"></i>
    </button>

    <!-- header -->
    <header id = "header" class = "vh-100 carousel slide" data-bs-ride = "carousel" style = "padding-top: 104px;">
        <div class="container h-100 d-flex align-items-center carousel-inner">
            <div class="text-center carousel-item active">
                <h2 class="text-capitalize text-white">Explore Fresh from the Farm</h2>
                <h1 class="text-uppercase py-2 fw-bold text-white">Discover New Harvests</h1>
                <a href="#" class="btn mt-3 text-uppercase">Shop Now</a>
            </div>
            <div class="text-center carousel-item">
                <h2 class="text-capitalize text-white">Best Prices & Quality Guaranteed</h2>
                <h1 class="text-uppercase py-2 fw-bold text-white">Browse Seasonal Produce</h1>
                <a href="#" class="btn mt-3 text-uppercase">Buy Now</a>
            </div>
        </div>
        

        <button class = "carousel-control-prev" type = "button" data-bs-target="#header" data-bs-slide = "prev">
            <span class = "carousel-control-prev-icon"></span>
        </button>
        <button class = "carousel-control-next" type = "button" data-bs-target="#header" data-bs-slide = "next">
            <span class = "carousel-control-next-icon"></span>
        </button>
    </header>
    <!-- end of header -->
    

    <section id = "collection" class = "py-5">
        <div class = "container">
            <div class = "title text-center">
                <h2 class = "position-relative d-inline-block">Fresh Harvest</h2>
            </div>

            <div class = "row g-0">
                <div class = "d-flex flex-wrap justify-content-center mt-5 filter-button-group">
                    <button type = "button" class = "btn m-2 text-dark active-filter-btn" data-filter = "*">All</button>
                    <button type = "button" class = "btn m-2 text-dark" data-filter = ".best">Organic Vegetables</button>
                    <button type = "button" class = "btn m-2 text-dark" data-filter = ".feat">Organic Diary</button>
                    <button type = "button" class = "btn m-2 text-dark" data-filter = ".new">Cold Pressed Organic Oils</button>
                </div>

                <div class="container mt-4">
                    <h1>Products</h1>
                    <div class="row gx-0 gy-3" id="collectionList">
                        <!-- Products will be dynamically added here -->
                    </div>
                </div>
            </div>
        </div>
    </section>






    <!-- Modal for View Details -->
    <div class="modal fade" id="productDetailsModal" tabindex="-1" role="dialog" aria-labelledby="productDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productDetailsModalLabel">Product Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="productDetailsBody">
                    <!-- Product details will be dynamically added here -->
                </div>
                <div class="modal-footer">
                    <div id="cartActions" class="d-flex align-items-center">
                        <!-- Add to Cart button or quantity control will be here -->
                    </div>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

     <!-- special products -->
     <section id = "special" class = "py-5">
        <div class = "container">
            <div class = "title text-center py-5">
                <h2 class = "position-relative d-inline-block">Handpicked Favorites</h2>
            </div>

            <div class = "special-list row g-0">
                <div class = "col-md-6 col-lg-4 col-xl-3 p-2">
                    <div class = "special-img position-relative overflow-hidden">
                        <img src = "images/pumpkins.jpg" class = "w-100">
                        <span class = "position-absolute d-flex align-items-center justify-content-center text-primary fs-4">
                            <i class = "fas fa-heart"></i>
                        </span>
                    </div>
                    <div class = "text-center">
                        <p class = "text-capitalize mt-3 mb-1">Organic Pumpkins</p>
                        <span class = "fw-bold d-block">â‚¹40 per kilogram</span>
                        <a href = "#" class = "btn btn-primary mt-3">Add to Cart</a>
                    </div>
                </div>

                <div class = "col-md-6 col-lg-4 col-xl-3 p-2">
                    <div class = "special-img position-relative overflow-hidden">
                        <img src = "images/mangosapling.jpg" class = "w-100">
                        <span class = "position-absolute d-flex align-items-center justify-content-center text-primary fs-4">
                            <i class = "fas fa-heart"></i>
                        </span>
                    </div>
                    <div class = "text-center">
                        <p class = "text-capitalize mt-3 mb-1">Organic Mango Saplings</p>
                        <span class = "fw-bold d-block">â‚¹150 per sapling</span>
                        <a href = "#" class = "btn btn-primary mt-3">Add to Cart</a>
                    </div>
                </div>

                <div class = "col-md-6 col-lg-4 col-xl-3 p-2">
                    <div class = "special-img position-relative overflow-hidden">
                        <img src = "images/fertilizer.jpg" class = "w-100">
                        <span class = "position-absolute d-flex align-items-center justify-content-center text-primary fs-4">
                            <i class = "fas fa-heart"></i>
                        </span>
                    </div>
                    <div class = "text-center">
                        <p class = "text-capitalize mt-3 mb-1">Organic Monsoon Fertilizer</p>
                        <span class = "fw-bold d-block">â‚¹200 per kilogram</span>
                        <a href = "#" class = "btn btn-primary mt-3">Add to Cart</a>
                    </div>
                </div>

                <div class = "col-md-6 col-lg-4 col-xl-3 p-2">
                    <div class = "special-img position-relative overflow-hidden">
                        <img src = "images/herbseeds.jpg" class = "w-100">
                        <span class = "position-absolute d-flex align-items-center justify-content-center text-primary fs-4">
                            <i class = "fas fa-heart"></i>
                        </span>
                    </div>
                    <div class = "text-center">
                        <p class = "text-capitalize mt-3 mb-1">Organic Summer Herb Seeds</p>
                        <span class = "fw-bold d-block">â‚¹50 per packet (50 seeds)</span>
                        <a href = "#" class = "btn btn-primary mt-3">Add to Cart</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end of special products -->

    <!-- blogs -->
    <section id = "offers" class = "py-5">
        <div class = "container">
            <div class = "row d-flex align-items-center justify-content-center text-center justify-content-lg-start text-lg-start">
                <div class="offers-content">
                    <span class="text-white">Exclusive Deals!</span>
                    <h2 class="mt-2 mb-4 text-white">Limited Time Sale!</h2>
                    <a href="#" class="btn">Shop Now</a>
                </div>
                
            </div>
        </div>
    </section>
    <!-- end of blogs -->

    <!-- blogs -->
    <section id = "blogs" class = "py-5">
        <div class = "container">
            <div class = "title text-center py-5">
                <h2 class = "position-relative d-inline-block">Our Latest Blog</h2>
            </div>

            <div class = "row g-3">
                <div class = "card border-0 col-md-6 col-lg-4 bg-transparent my-3">
                    <img src = "images/blog_1.jpg" alt = "">
                    <div class = "card-body px-0">
                        <h4 class = "card-title">Lorem ipsum, dolor sit amet consectetur adipisicing</h4>
                        <p class = "card-text mt-3 text-muted">Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet aspernatur repudiandae nostrum dolorem molestias odio. Sit fugit adipisci omnis quia itaque ratione iusto sapiente reiciendis, numquam officiis aliquid ipsam fuga.</p>
                        <p class = "card-text">
                            <small class = "text-muted">
                                <span class = "fw-bold">Author: </span>John Doe
                            </small>
                        </p>
                        <a href = "#" class = "btn">Read More</a>
                    </div>
                </div>

                <div class = "card border-0 col-md-6 col-lg-4 bg-transparent my-3">
                    <img src = "images/blog_2.jpg" alt = "">
                    <div class = "card-body px-0">
                        <h4 class = "card-title">Lorem ipsum, dolor sit amet consectetur adipisicing</h4>
                        <p class = "card-text mt-3 text-muted">Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet aspernatur repudiandae nostrum dolorem molestias odio. Sit fugit adipisci omnis quia itaque ratione iusto sapiente reiciendis, numquam officiis aliquid ipsam fuga.</p>
                        <p class = "card-text">
                            <small class = "text-muted">
                                <span class = "fw-bold">Author: </span>John Doe
                            </small>
                        </p>
                        <a href = "#" class = "btn">Read More</a>
                    </div>
                </div>

                <div class = "card border-0 col-md-6 col-lg-4 bg-transparent my-3">
                    <img src = "images/blog_3.jpg" alt = "">
                    <div class = "card-body px-0">
                        <h4 class = "card-title">Lorem ipsum, dolor sit amet consectetur adipisicing</h4>
                        <p class = "card-text mt-3 text-muted">Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet aspernatur repudiandae nostrum dolorem molestias odio. Sit fugit adipisci omnis quia itaque ratione iusto sapiente reiciendis, numquam officiis aliquid ipsam fuga.</p>
                        <p class = "card-text">
                            <small class = "text-muted">
                                <span class = "fw-bold">Author: </span>John Doe
                            </small>
                        </p>
                        <a href = "#" class = "btn">Read More</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end of blogs -->

    <!-- about us -->
    <section id="about" class="py-5">
        <div class="container">
            <div class="row gy-lg-5 align-items-center">
                <div class="col-lg-6 order-lg-1 text-center text-lg-start">
                    <div class="title pt-3 pb-5">
                        <h2 class="position-relative d-inline-block ms-4">About Us</h2>
                    </div>
                    <p class="lead text-muted">Welcome to Farm2Fork, your one-stop destination for farm-fresh produce!</p>
                    <p>At Farm2Fork, we are passionate about connecting farmers directly with consumers, ensuring that you receive the freshest and highest quality agricultural products. Our mission is to support local farmers, promote sustainable agriculture practices, and provide you with an exceptional shopping experience.</p>
                    <p>Explore our wide selection of organic fruits, vegetables, dairy products, and more, sourced directly from farms across the country. Join us in our journey towards healthier living and a greener planet.</p>
                </div>
                <div class="col-lg-6 order-lg-0">
                    <img src="images/aboutus.jpg" alt="About Us" class="img-fluid">
                </div>
            </div>
        </div>
    </section>
    
    <!-- end of about us -->

    <!-- popular -->
    <section id = "popular" class = "py-5">
        <div class = "container">
            <div class = "title text-center pt-3 pb-5">
                <h2 class = "position-relative d-inline-block ms-4">Popular Of This Year</h2>
            </div>

            <div class = "row">
                <div class = "col-md-6 col-lg-4 row g-3">
                    <h3 class = "fs-5">Top Rated</h3>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/fertilizer.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Monsoon Fertilizer</p>
                            <span>â‚¹200 per kilogram</span>
                        </div>
                    </div>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/mangosapling.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Mango Saplings</p>
                            <span>â‚¹150 per sapling</span>
                        </div>
                    </div>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/pumpkins.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Pumpkins</p>
                            <span>â‚¹40 per kilogram</span>
                        </div>
                    </div>
                </div>

                <div class = "col-md-6 col-lg-4 row g-3">
                    <h3 class = "fs-5">Best Selling</h3>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/flaxseedoil.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Cold-Pressed Flaxseed Oil</p>
                            <span>â‚¹350 per 250 ml</span>
                        </div>
                    </div>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/eggs.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Free-Range Eggs</p>
                            <span>â‚¹6 per egg</span>
                        </div>
                    </div>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/cocunutoil.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic cold-pressed cocunut oil</p>
                            <span>â‚¹300 per 500ml</span>
                        </div>
                    </div>
                </div>

                <div class = "col-md-6 col-lg-4 row g-3">
                    <h3 class = "fs-5">On Sale</h3>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/herbseeds.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Summer Herb Seeds</p>
                            <span>â‚¹50 per packet (50 seeds)</span>
                        </div>
                    </div>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/cottagecheese.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Cottage-Cheese</p>
                            <span>â‚¹150 per 500gms</span>
                        </div>
                    </div>
                    <div class = "d-flex align-items-start justify-content-start">
                        <img src = "images/strawberry.jpg" alt = "" class = "img-fluid pe-3 w-25">
                        <div>
                            <p class = "mb-0">Organic Fresh Strawberries</p>
                            <span>â‚¹150 per kilogram</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end of popular -->

    <!-- newsletter -->
    <section id="newsletter" class="py-5">
        <div class="container">
            <div class="d-flex flex-column align-items-center justify-content-center">
                <div class="title text-center pt-3 pb-5">
                    <h2 class="position-relative d-inline-block ms-4">Stay Updated with Our Newsletter</h2>
                </div>
    
                <p class="text-center text-muted">Sign up for our newsletter to receive the latest updates, exclusive offers, and farm-to-table insights straight to your inbox!</p>
                <form class="newsletter-form" action="#" method="post">
                    <div class="input-group mb-3 mt-3">
                        <input type="email" class="form-control" placeholder="Enter Your Email ..." aria-label="Email" aria-describedby="button-addon2" required>
                        <button class="btn btn-primary" type="submit" id="button-addon2">Subscribe</button>
                    </div>
                </form>
            </div>
        </div>
    </section>
    
    <!-- end of newsletter -->

    <!-- Bootstrap JS and jQuery (adjust paths as necessary) -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    let cart = JSON.parse(localStorage.getItem('cart')) || {}; // Retrieve cart from localStorage

    async function fetchProducts() {
        const response = await fetch('/products');
        const products = await response.json();
        const collectionList = document.getElementById('collectionList');

        collectionList.innerHTML = ''; // Clear previous content

        products.forEach(product => {
            const productHtml = `
                <div class="col-md-6 col-lg-4 col-xl-3 p-2 best">
                    <div class="collection-img position-relative">
                        <img src="${product.imageUrl}" class="w-100">
                        <span class="position-absolute bg-primary text-white d-flex align-items-center justify-content-center">sale</span>
                    </div>
                    <div class="text-center">
                        <div class="rating mt-3">
                            <span class="text-primary"><i class="fas fa-star"></i></span>
                            <span class="text-primary"><i class="fas fa-star"></i></span>
                            <span class="text-primary"><i class="fas fa-star"></i></span>
                            <span class="text-primary"><i class="fas fa-star"></i></span>
                            <span class="text-primary"><i class="fas fa-star"></i></span>
                        </div>
                        <p class="text-capitalize my-1">${product.productName}</p>
                        <span class="fw-bold">Price: â‚¹${product.price.toFixed(2)} per ${product.unit}</span>

                        <p class="text-muted">${product.category}</p> <!-- Displaying the product category -->
                        <button type="button" class="btn btn-sm btn-outline-secondary mt-2" onclick="viewDetails('${product._id}')">View Details</button>
                    </div>
                </div>
            `;
            collectionList.insertAdjacentHTML('beforeend', productHtml);
        });
    }

    async function viewDetails(productId) {
        try {
            const response = await fetch(`/products/${productId}`);
            const product = await response.json();

            // Populate modal with product details
            const modalTitle = document.getElementById('productDetailsModalLabel');
            const modalBody = document.getElementById('productDetailsBody');
            const cartActions = document.getElementById('cartActions');
            
            modalTitle.textContent = product.productName;
            modalBody.innerHTML = `
                <img src="${product.imageUrl}" class="img-fluid mb-2" alt="Product Image">
                <p><strong>Description:</strong> ${product.description}</p>
                <p><strong>Price:</strong> â‚¹${product.price.toFixed(2)}</p>
                <p><strong>Category:</strong> ${product.category}</p> <!-- Displaying the product category -->
            `;

            // Check if product is already in the cart and show quantity control, otherwise show Add to Cart button
            if (cart[productId]) {
                cartActions.innerHTML = `
                    <button type="button" class="btn btn-outline-secondary" onclick="decreaseQuantity('${productId}')">-</button>
                    <span class="mx-2" id="cartQuantity">${cart[productId].quantity}</span>
                    <button type="button" class="btn btn-outline-secondary" onclick="increaseQuantity('${productId}')">+</button>
                `;
            } else {
                cartActions.innerHTML = `
                    <button type="button" class="btn btn-primary" onclick="addToCart('${productId}', '${product.productName}', ${product.price}, '${product.imageUrl}')">Add to Cart</button>
                `;
            }

            // Show the modal
            $('#productDetailsModal').modal('show');
        } catch (error) {
            console.error('Error fetching product details:', error);
        }
    }

    function addToCart(productId, name, price, imageUrl) {
        if (!cart[productId]) {
            cart[productId] = { name, price, imageUrl, quantity: 1 };
        }
        updateCart(productId);
    }

    function increaseQuantity(productId) {
        cart[productId].quantity++;
        updateCart(productId);
    }

    function decreaseQuantity(productId) {
        if (cart[productId].quantity > 1) {
            cart[productId].quantity--;
        } else {
            delete cart[productId];
        }
        updateCart(productId);
    }

    function updateCart(productId) {
        localStorage.setItem('cart', JSON.stringify(cart)); // Save cart to localStorage
        updateCartActions(productId);
    }

    function updateCartActions(productId) {
        const cartActions = document.getElementById('cartActions');
        if (cart[productId]) {
            cartActions.innerHTML = `
                <button type="button" class="btn btn-outline-secondary" onclick="decreaseQuantity('${productId}')">-</button>
                <span class="mx-2" id="cartQuantity">${cart[productId].quantity}</span>
                <button type="button" class="btn btn-outline-secondary" onclick="increaseQuantity('${productId}')">+</button>
            `;
        } else {
            cartActions.innerHTML = `
                <button type="button" class="btn btn-primary" onclick="addToCart('${productId}')">Add to Cart</button>
            `;
        }
    }

    // Fetch products when the page loads
    document.addEventListener('DOMContentLoaded', fetchProducts);

    // Back button functionality
    function goBack() {
        if (document.referrer) {
            window.history.back();
        } else {
            window.location.href = '/';
        }
    }

    

    
</script>

</body>
</html>
